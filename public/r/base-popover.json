{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "base-popover",
  "type": "registry:ui",
  "title": "Base Popover",
  "description": "Base popover component",
  "dependencies": [
    "motion",
    "@base-ui-components/react"
  ],
  "files": [
    {
      "path": "registry/base/base-popover/index.tsx",
      "content": "'use client';\n\nimport * as React from 'react';\nimport { Popover as PopoverPrimitive } from '@base-ui-components/react/popover';\nimport {\n  AnimatePresence,\n  HTMLMotionProps,\n  motion,\n  type Transition,\n} from 'motion/react';\n\nimport { cn } from '@/lib/utils';\n\ntype Side = React.ComponentPropsWithoutRef<\n  typeof PopoverPrimitive.Positioner\n>['side'];\ntype Align = React.ComponentPropsWithoutRef<\n  typeof PopoverPrimitive.Positioner\n>['align'];\n\ninterface PopoverContextType {\n  isOpen: boolean;\n  side?: Side;\n  setSide?: (side: Side) => void;\n}\nconst PopoverContext = React.createContext<PopoverContextType | undefined>(\n  undefined,\n);\n\nconst usePopover = (): PopoverContextType => {\n  const context = React.useContext(PopoverContext);\n  if (!context) {\n    throw new Error('usePopover must be used within a Popover');\n  }\n  return context;\n};\n\ntype PopoverProps = React.ComponentPropsWithoutRef<\n  typeof PopoverPrimitive.Root\n>;\n\nconst Popover: React.FC<PopoverProps> = ({ children, ...props }) => {\n  const [isOpen, setIsOpen] = React.useState(\n    props?.open ?? props?.defaultOpen ?? false,\n  );\n\n  React.useEffect(() => {\n    if (props?.open !== undefined) setIsOpen(props.open);\n  }, [props?.open]);\n\n  const handleOpenChange = React.useCallback(\n    (\n      open: boolean,\n      event: Event | undefined,\n      reason: Parameters<NonNullable<PopoverProps['onOpenChange']>>[2],\n    ) => {\n      setIsOpen(open);\n      props.onOpenChange?.(open, event, reason);\n    },\n    [props],\n  );\n\n  return (\n    <PopoverContext.Provider value={{ isOpen }}>\n      <PopoverPrimitive.Root {...props} onOpenChange={handleOpenChange}>\n        {children}\n      </PopoverPrimitive.Root>\n    </PopoverContext.Provider>\n  );\n};\n\ntype PopoverTriggerProps = React.ComponentPropsWithoutRef<\n  typeof PopoverPrimitive.Trigger\n>;\n\nconst PopoverTrigger = PopoverPrimitive.Trigger;\n\nconst getInitialPosition = (side: Side) => {\n  switch (side) {\n    case 'top':\n      return { y: 15 };\n    case 'bottom':\n      return { y: -15 };\n    case 'left':\n    case 'inline-end':\n      return { x: 15 };\n    case 'right':\n    case 'inline-start':\n      return { x: -15 };\n  }\n};\n\ntype PopoverContentProps = Omit<\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Positioner>,\n  'render'\n> & {\n  transition?: Transition;\n  popupProps?: typeof PopoverPrimitive.Popup;\n  motionProps?: HTMLMotionProps<'div'>;\n  positionerClassName?: string;\n};\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Positioner>,\n  PopoverContentProps\n>(\n  (\n    {\n      children,\n      align = 'center',\n      side = 'bottom',\n      sideOffset = 4,\n      className,\n      positionerClassName,\n      popupProps,\n      motionProps,\n      transition = { type: 'spring', stiffness: 300, damping: 25 },\n      ...props\n    },\n    ref,\n  ) => {\n    const { isOpen } = usePopover();\n    const initialPosition = getInitialPosition(side);\n\n    return (\n      <AnimatePresence>\n        {isOpen && (\n          <PopoverPrimitive.Portal keepMounted>\n            <PopoverPrimitive.Positioner\n              align={align}\n              side={side}\n              sideOffset={sideOffset}\n              className={cn('z-50', positionerClassName)}\n              {...props}\n              ref={ref}\n            >\n              <PopoverPrimitive.Popup\n                {...popupProps}\n                className={cn(\n                  'w-72 rounded-lg border bg-popover p-4 text-popover-foreground shadow-md outline-none',\n                  className,\n                )}\n                render={\n                  <motion.div\n                    key=\"popover\"\n                    initial={{ opacity: 0, scale: 0.5, ...initialPosition }}\n                    animate={{ opacity: 1, scale: 1, x: 0, y: 0 }}\n                    exit={{ opacity: 0, scale: 0.5, ...initialPosition }}\n                    transition={transition}\n                    {...motionProps}\n                  />\n                }\n              >\n                {children}\n              </PopoverPrimitive.Popup>\n            </PopoverPrimitive.Positioner>\n          </PopoverPrimitive.Portal>\n        )}\n      </AnimatePresence>\n    );\n  },\n);\nPopoverContent.displayName = 'PopoverContent';\n\nexport {\n  Popover,\n  PopoverTrigger,\n  PopoverContent,\n  usePopover,\n  type PopoverContextType,\n  type PopoverProps,\n  type PopoverTriggerProps,\n  type PopoverContentProps,\n  type Side,\n  type Align,\n};\n",
      "type": "registry:ui",
      "target": "components/base/base-popover.tsx"
    }
  ]
}